{"componentChunkName":"component---src-templates-zh-docs-js","path":"/zh/ci","result":{"data":{"markdownRemark":{"html":"<p class=\"sub-title\">大家都喜欢持续集成，我们也是。</p>\n<h1 id=\"在任意目录\"><a href=\"#%E5%9C%A8%E4%BB%BB%E6%84%8F%E7%9B%AE%E5%BD%95\" aria-label=\"在任意目录 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>在任意目录</h1>\n<h2 id=\"安装\"><a href=\"#%E5%AE%89%E8%A3%85\" aria-label=\"安装 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>安装</h2>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> -g last-hit-replayer</code></pre></div>\n<p>或者</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">yarn</span> global <span class=\"token function\">add</span> last-hit-replayer</code></pre></div>\n<p>推荐使用Yarn。了解更多信息，请参考<a href=\"https://yarnpkg.com/\">yarnpkg.com</a></p>\n<blockquote>\n<p><a href=\"https://nodejs.org/en/download/\">Node.js</a>，必须12.11+以上。</p>\n</blockquote>\n<h2 id=\"回放\"><a href=\"#%E5%9B%9E%E6%94%BE\" aria-label=\"回放 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>回放</h2>\n<h3 id=\"回放整个工作空间\"><a href=\"#%E5%9B%9E%E6%94%BE%E6%95%B4%E4%B8%AA%E5%B7%A5%E4%BD%9C%E7%A9%BA%E9%97%B4\" aria-label=\"回放整个工作空间 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>回放整个工作空间</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">last-hit-replayer --workspace<span class=\"token operator\">=</span>directory/to/your/workspace</code></pre></div>\n<h3 id=\"指定回放story\"><a href=\"#%E6%8C%87%E5%AE%9A%E5%9B%9E%E6%94%BEstory\" aria-label=\"指定回放story permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>指定回放Story</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">last-hit-replayer --workspace<span class=\"token operator\">=</span>directory/to/your/workspace --story<span class=\"token operator\">=</span>your-story-name</code></pre></div>\n<h3 id=\"指定回放flow\"><a href=\"#%E6%8C%87%E5%AE%9A%E5%9B%9E%E6%94%BEflow\" aria-label=\"指定回放flow permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>指定回放Flow</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">last-hit-replayer --workspace<span class=\"token operator\">=</span>directory/to/your/workspace --story<span class=\"token operator\">=</span>your-story-name --flow<span class=\"token operator\">=</span>your-flow-name</code></pre></div>\n<blockquote>\n<p>如果没有指定Story名称，则Flow名称将被忽略。</p>\n</blockquote>\n<h1 id=\"在您的项目\"><a href=\"#%E5%9C%A8%E6%82%A8%E7%9A%84%E9%A1%B9%E7%9B%AE\" aria-label=\"在您的项目 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>在您的项目</h1>\n<h2 id=\"安装-1\"><a href=\"#%E5%AE%89%E8%A3%85-1\" aria-label=\"安装 1 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>安装</h2>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> last-hit-replayer</code></pre></div>\n<p>或者</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">yarn</span> <span class=\"token function\">add</span> last-hit-replayer</code></pre></div>\n<p>推荐使用Yarn。了解更多信息，请参考<a href=\"https://yarnpkg.com/\">yarnpkg.com</a></p>\n<h2 id=\"添加启动脚本\"><a href=\"#%E6%B7%BB%E5%8A%A0%E5%90%AF%E5%8A%A8%E8%84%9A%E6%9C%AC\" aria-label=\"添加启动脚本 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>添加启动脚本</h2>\n<p>在<code class=\"language-text\">package.json</code>中</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre style=\"counter-reset: linenumber 0\" class=\"language-json line-numbers\"><code class=\"language-json\"><span class=\"token property\">\"script\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"start\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"last-hit-replayer\"</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<h2 id=\"回放-1\"><a href=\"#%E5%9B%9E%E6%94%BE-1\" aria-label=\"回放 1 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>回放</h2>\n<h3 id=\"回放整个工作空间-1\"><a href=\"#%E5%9B%9E%E6%94%BE%E6%95%B4%E4%B8%AA%E5%B7%A5%E4%BD%9C%E7%A9%BA%E9%97%B4-1\" aria-label=\"回放整个工作空间 1 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>回放整个工作空间</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">yarn</span> start --workspace<span class=\"token operator\">=</span>directory/to/your/workspace</code></pre></div>\n<h3 id=\"回放指定story\"><a href=\"#%E5%9B%9E%E6%94%BE%E6%8C%87%E5%AE%9Astory\" aria-label=\"回放指定story permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>回放指定Story</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">yarn</span> start --workspace<span class=\"token operator\">=</span>directory/to/your/workspace --story<span class=\"token operator\">=</span>your-story-name</code></pre></div>\n<h3 id=\"回放指定flow\"><a href=\"#%E5%9B%9E%E6%94%BE%E6%8C%87%E5%AE%9Aflow\" aria-label=\"回放指定flow permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>回放指定Flow</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">yarn</span> start --workspace<span class=\"token operator\">=</span>directory/to/your/workspace --story<span class=\"token operator\">=</span>your-story-name --flow<span class=\"token operator\">=</span>your-flow-name</code></pre></div>\n<blockquote>\n<p>如果没有指定Story名称，则Flow名称将被忽略。</p>\n</blockquote>\n<h1 id=\"并行回放\"><a href=\"#%E5%B9%B6%E8%A1%8C%E5%9B%9E%E6%94%BE\" aria-label=\"并行回放 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>并行回放</h1>\n<p>持续集成可以通过命令行参数<code class=\"language-text\">--parallel</code>使用并行回放。</p>\n<p>以下是合法的<code class=\"language-text\">--parallel</code>参数值：</p>\n<ul>\n<li><code class=\"language-text\">整数</code>, 指定使用子进程个数。</li>\n<li><code class=\"language-text\">非整数</code>, 基于CPU核数指定使用子进程个数。</li>\n</ul>\n<p>例：  </p>\n<ul>\n<li>启动8个子进程，无论当前有多少CPU核。</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">last-hit-replayer --workspace<span class=\"token operator\">=</span>directory/to/your/workspace --story<span class=\"token operator\">=</span>your-story-name --parallel<span class=\"token operator\">=</span><span class=\"token number\">8</span></code></pre></div>\n<p>例：  </p>\n<ul>\n<li>如果当前CPU为16核，那么<code class=\"language-text\">16 * 0.8 = 12.8</code> -> 13个子进程将被启动。</li>\n<li>如果当前CPU为8核，那么<code class=\"language-text\">8 * 0.8 = 6.4</code> -> 6个子进程将被启动。</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">last-hit-replayer --workspace<span class=\"token operator\">=</span>directory/to/your/workspace --story<span class=\"token operator\">=</span>your-story-name --parallel<span class=\"token operator\">=</span><span class=\"token number\">0.8</span></code></pre></div>\n<p>例：  </p>\n<ul>\n<li>如果当前CPU为16核，那么<code class=\"language-text\">16 * 1.2 = 19</code> -> 19个子进程将被启动。</li>\n<li>如果当前CPU为8核，那么<code class=\"language-text\">8 * 1.2 = 10</code> -> 10个子进程将被启动。</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">last-hit-replayer --workspace<span class=\"token operator\">=</span>directory/to/your/workspace --story<span class=\"token operator\">=</span>your-story-name --parallel<span class=\"token operator\">=</span><span class=\"token number\">1.2</span></code></pre></div>\n<blockquote>\n<p>没有指定<code class=\"language-text\">--parallel</code>，则在单进程模式下运行。</p>\n</blockquote>\n<h1 id=\"命令行参数\"><a href=\"#%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%8F%82%E6%95%B0\" aria-label=\"命令行参数 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>命令行参数</h1>\n<p>所有的命令行参数都会以前缀<code class=\"language-text\">--settings</code>开始，例如<code class=\"language-text\">--settings-sleepAfterChange</code>。</p>\n<h2 id=\"change-step后等待时间\"><a href=\"#change-step%E5%90%8E%E7%AD%89%E5%BE%85%E6%97%B6%E9%97%B4\" aria-label=\"change step后等待时间 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Change Step后等待时间</h2>\n<p>某些情况下，真正的内存数据模型变化会被延迟执行。可以全局设定<code class=\"language-text\">--settings-sleepAfterChange</code>参数。  </p>\n<p>例：  </p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre style=\"counter-reset: linenumber 0\" class=\"language-html line-numbers\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>input<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">onChange</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>onChange<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber 0\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">let</span> changeTimeout<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">onChange</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>changeTimeout<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">clearTimeout</span><span class=\"token punctuation\">(</span>changeTimeout<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token comment\">// sync dom value into in memory model</span>\n\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">200</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<blockquote>\n<p>以上设置中，每个Change Step后将会等待200毫秒。</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">last-hit-replayer --workspace<span class=\"token operator\">=</span>directory/to/your/workspace --story<span class=\"token operator\">=</span>your-story-name --flow<span class=\"token operator\">=</span>your-flow-name --settings-sleepAfterChange<span class=\"token operator\">=</span><span class=\"token number\">200</span></code></pre></div>\n<h2 id=\"慢ajax时间\"><a href=\"#%E6%85%A2ajax%E6%97%B6%E9%97%B4\" aria-label=\"慢ajax时间 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>慢Ajax时间</h2>\n<p>可以通过设置慢Ajax时间针对响应较慢的Ajax访问进行统计，默认为<code class=\"language-text\">500毫秒</code>.</p>\n<p>例：  </p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">last-hit-replayer --workspace<span class=\"token operator\">=</span>directory/to/your/workspace --story<span class=\"token operator\">=</span>your-story-name --flow<span class=\"token operator\">=</span>your-flow-name --settings-slowAjaxTime<span class=\"token operator\">=</span><span class=\"token number\">300</span></code></pre></div>\n<blockquote>\n<p>以上设置中，Ajax访问如果超过300毫秒，将会作为慢Ajax被统计。</p>\n</blockquote>\n<h1 id=\"环境参数\"><a href=\"#%E7%8E%AF%E5%A2%83%E5%8F%82%E6%95%B0\" aria-label=\"环境参数 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>环境参数</h1>\n<p>环境设置可以通过工具进行设置。</p>\n<h2 id=\"命令行参数-1\"><a href=\"#%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%8F%82%E6%95%B0-1\" aria-label=\"命令行参数 1 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>命令行参数</h2>\n<p>所有的命令行参数都可以在环境参数中被设置。如果命令行中具有同样参数，则以命令行为优先。</p>\n<p>以下是一个工作空间的环境设置示例，</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre style=\"counter-reset: linenumber 0\" class=\"language-json line-numbers\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n\t<span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"last-hit-demo\"</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token property\">\"envs\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n\t\t<span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"demo-env\"</span><span class=\"token punctuation\">,</span>\n\t\t\t<span class=\"token property\">\"slowAjaxTime\"</span><span class=\"token operator\">:</span> <span class=\"token number\">400</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>使用如下命令行启动时，</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">last-hit-replayer --workspace<span class=\"token operator\">=</span>directory/to/your/workspace --story<span class=\"token operator\">=</span>your-story-name --flow<span class=\"token operator\">=</span>your-flow-name --env<span class=\"token operator\">=</span>demo-env</code></pre></div>\n<p>则任何超过400毫秒的Ajax访问会作为慢Ajax被统计。</p>\n<p>以下为通过命令行覆盖环境设置的示例，</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">last-hit-replayer --workspace<span class=\"token operator\">=</span>directory/to/your/workspace --story<span class=\"token operator\">=</span>your-story-name --flow<span class=\"token operator\">=</span>your-flow-name --env<span class=\"token operator\">=</span>demo-env --settings-slowAjaxTime<span class=\"token operator\">=</span><span class=\"token number\">300</span></code></pre></div>\n<p>则任何超过300毫秒的Ajax访问会作为慢Ajax被统计。</p>\n<h2 id=\"url替换\"><a href=\"#url%E6%9B%BF%E6%8D%A2\" aria-label=\"url替换 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>URL替换</h2>\n<p>某些时候，测试用例在一个环境录制，需要在另一个环境回放。则URL可以通过环境设置进行替换。</p>\n<p>以下是一个工作空间的环境设置示例，</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre style=\"counter-reset: linenumber 0\" class=\"language-json line-numbers\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n\t<span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"last-hit-demo\"</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token property\">\"envs\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n\t\t<span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"demo-dev\"</span><span class=\"token punctuation\">,</span>\n\t\t\t<span class=\"token property\">\"urlReplaceRegexp\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^https?:\\\\/\\\\/localhost:3000(.*)$\"</span><span class=\"token punctuation\">,</span>\n\t\t\t<span class=\"token property\">\"urlReplaceTo\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"http://demo-dev.domain.com$1\"</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>则Step的URL将根据指定的正则表达式和替换值进行替换。<br>\n如果需要多个替换规则，使用<code class=\"language-text\">&amp;&amp;</code>间隔，  </p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre style=\"counter-reset: linenumber 0\" class=\"language-json line-numbers\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n\t<span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"last-hit-demo\"</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token property\">\"envs\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n\t\t<span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"demo-dev\"</span><span class=\"token punctuation\">,</span>\n\t\t\t<span class=\"token property\">\"urlReplaceRegexp\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^https?:\\\\/\\\\/localhost:3000(.*)$&amp;&amp;^https?:\\\\/\\\\/localhost:3002(.*)$\"</span><span class=\"token punctuation\">,</span>\n\t\t\t<span class=\"token property\">\"urlReplaceTo\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"http://demo-dev.domain.com$1&amp;&amp;http://demo-dev2.domain.com$1\"</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<blockquote>\n<p>请保证正则表达式和替换值的个数一致。</p>\n</blockquote>\n<h1 id=\"结果搜集\"><a href=\"#%E7%BB%93%E6%9E%9C%E6%90%9C%E9%9B%86\" aria-label=\"结果搜集 permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>结果搜集</h1>\n<p>回放之后，所有的结果都将被在工作空间目录和回放执行目录输出，您可以按照您的要求重新进行组织。<br>\n我们推荐将关键指标数据使用邮件通知方式告知您的团队，通常持续集成服务都会提供此特性。<br>\n另一个选项是选用我们提供的<a href=\"/zh/admin-server/\">中央管理服务</a>对您的数据进行搜集和分析。</p>","tableOfContents":"<ul>\n<li>\n<p><a href=\"/zh/ci/#%E5%9C%A8%E4%BB%BB%E6%84%8F%E7%9B%AE%E5%BD%95\">在任意目录</a></p>\n<ul>\n<li><a href=\"/zh/ci/#%E5%AE%89%E8%A3%85\">安装</a></li>\n<li>\n<p><a href=\"/zh/ci/#%E5%9B%9E%E6%94%BE\">回放</a></p>\n<ul>\n<li><a href=\"/zh/ci/#%E5%9B%9E%E6%94%BE%E6%95%B4%E4%B8%AA%E5%B7%A5%E4%BD%9C%E7%A9%BA%E9%97%B4\">回放整个工作空间</a></li>\n<li><a href=\"/zh/ci/#%E6%8C%87%E5%AE%9A%E5%9B%9E%E6%94%BEstory\">指定回放Story</a></li>\n<li><a href=\"/zh/ci/#%E6%8C%87%E5%AE%9A%E5%9B%9E%E6%94%BEflow\">指定回放Flow</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"/zh/ci/#%E5%9C%A8%E6%82%A8%E7%9A%84%E9%A1%B9%E7%9B%AE\">在您的项目</a></p>\n<ul>\n<li><a href=\"/zh/ci/#%E5%AE%89%E8%A3%85-1\">安装</a></li>\n<li><a href=\"/zh/ci/#%E6%B7%BB%E5%8A%A0%E5%90%AF%E5%8A%A8%E8%84%9A%E6%9C%AC\">添加启动脚本</a></li>\n<li>\n<p><a href=\"/zh/ci/#%E5%9B%9E%E6%94%BE-1\">回放</a></p>\n<ul>\n<li><a href=\"/zh/ci/#%E5%9B%9E%E6%94%BE%E6%95%B4%E4%B8%AA%E5%B7%A5%E4%BD%9C%E7%A9%BA%E9%97%B4-1\">回放整个工作空间</a></li>\n<li><a href=\"/zh/ci/#%E5%9B%9E%E6%94%BE%E6%8C%87%E5%AE%9Astory\">回放指定Story</a></li>\n<li><a href=\"/zh/ci/#%E5%9B%9E%E6%94%BE%E6%8C%87%E5%AE%9Aflow\">回放指定Flow</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"/zh/ci/#%E5%B9%B6%E8%A1%8C%E5%9B%9E%E6%94%BE\">并行回放</a></li>\n<li>\n<p><a href=\"/zh/ci/#%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%8F%82%E6%95%B0\">命令行参数</a></p>\n<ul>\n<li><a href=\"/zh/ci/#change-step%E5%90%8E%E7%AD%89%E5%BE%85%E6%97%B6%E9%97%B4\">Change Step后等待时间</a></li>\n<li><a href=\"/zh/ci/#%E6%85%A2ajax%E6%97%B6%E9%97%B4\">慢Ajax时间</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"/zh/ci/#%E7%8E%AF%E5%A2%83%E5%8F%82%E6%95%B0\">环境参数</a></p>\n<ul>\n<li><a href=\"/zh/ci/#%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%8F%82%E6%95%B0-1\">命令行参数</a></li>\n<li><a href=\"/zh/ci/#url%E6%9B%BF%E6%8D%A2\">URL替换</a></li>\n</ul>\n</li>\n<li><a href=\"/zh/ci/#%E7%BB%93%E6%9E%9C%E6%90%9C%E9%9B%86\">结果搜集</a></li>\n</ul>","frontmatter":{"date":"December 23, 2019","path":"/zh/ci","title":"持续集成","author":"bradwoo8621"}}},"pageContext":{"isCreatedByStatefulCreatePages":false}}}